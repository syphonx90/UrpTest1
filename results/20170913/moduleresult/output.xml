<?xml version="1.0" encoding="UTF-8"?>
<robot generated="20170913 12:28:58.371" generator="Robot 3.0.2 (Python 2.7.9 on win32)">
<suite source="C:\development\robot-scripts\urp\tests\Modules\Module1_create.robot" id="s1" name="Module1 create">
<test id="s1-t1" name="Read SQL from File">
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>File Content: ${SQL_FILE}</arg>
</arguments>
<msg timestamp="20170913 12:28:58.792" level="INFO">File Content: </msg>
<status status="PASS" endtime="20170913 12:28:58.792" starttime="20170913 12:28:58.792"></status>
</kw>
<tags>
<tag>SQL from File</tag>
</tags>
<status status="PASS" endtime="20170913 12:28:58.808" critical="yes" starttime="20170913 12:28:58.792"></status>
</test>
<test id="s1-t2" name="LogIn">
<kw name="Open Browser" library="Selenium2Library">
<doc>Opens a new browser instance to given URL.</doc>
<arguments>
<arg>http://10.0.1.47:8080/urp/urp/</arg>
<arg>${BROWSER}</arg>
</arguments>
<msg timestamp="20170913 12:28:58.808" level="INFO">Opening browser 'gc' to base url 'http://10.0.1.47:8080/urp/urp/'</msg>
<status status="PASS" endtime="20170913 12:29:06.535" starttime="20170913 12:28:58.808"></status>
</kw>
<kw name="Sleep" library="BuiltIn">
<doc>Pauses the test executed for the given time.</doc>
<arguments>
<arg>5s</arg>
</arguments>
<msg timestamp="20170913 12:29:12.007" level="INFO">Slept 5 seconds</msg>
<status status="PASS" endtime="20170913 12:29:12.007" starttime="20170913 12:29:06.997"></status>
</kw>
<kw name="Click Button" library="Selenium2Library">
<doc>Clicks a button identified by `locator`.</doc>
<arguments>
<arg>xpath=//*[@id="show_login_btn"]</arg>
</arguments>
<msg timestamp="20170913 12:29:12.007" level="INFO">Clicking button 'xpath=//*[@id="show_login_btn"]'.</msg>
<status status="PASS" endtime="20170913 12:29:12.178" starttime="20170913 12:29:12.007"></status>
</kw>
<kw name="Sleep" library="BuiltIn">
<doc>Pauses the test executed for the given time.</doc>
<arguments>
<arg>5s</arg>
</arguments>
<msg timestamp="20170913 12:29:17.195" level="INFO">Slept 5 seconds</msg>
<status status="PASS" endtime="20170913 12:29:17.195" starttime="20170913 12:29:12.180"></status>
</kw>
<kw name="Click Element" library="Selenium2Library">
<doc>Click element identified by `locator`.</doc>
<arguments>
<arg>xpath=//*[@id="login_form"]/div[1]/div/div/input</arg>
</arguments>
<msg timestamp="20170913 12:29:17.195" level="INFO">Clicking element 'xpath=//*[@id="login_form"]/div[1]/div/div/input'.</msg>
<status status="PASS" endtime="20170913 12:29:17.289" starttime="20170913 12:29:17.195"></status>
</kw>
<kw name="Sleep" library="BuiltIn">
<doc>Pauses the test executed for the given time.</doc>
<arguments>
<arg>5s</arg>
</arguments>
<msg timestamp="20170913 12:29:22.324" level="INFO">Slept 5 seconds</msg>
<status status="PASS" endtime="20170913 12:29:22.324" starttime="20170913 12:29:17.289"></status>
</kw>
<kw name="Input Text" library="Selenium2Library">
<doc>Types the given `text` into text field identified by `locator`.</doc>
<arguments>
<arg>identifier=login</arg>
<arg>${USER}</arg>
</arguments>
<msg timestamp="20170913 12:29:22.324" level="INFO">Typing text 'sranatunga@context1.com' into text field 'identifier=login'</msg>
<status status="PASS" endtime="20170913 12:29:22.906" starttime="20170913 12:29:22.324"></status>
</kw>
<kw name="Sleep" library="BuiltIn">
<doc>Pauses the test executed for the given time.</doc>
<arguments>
<arg>5s</arg>
</arguments>
<msg timestamp="20170913 12:29:27.912" level="INFO">Slept 5 seconds</msg>
<status status="PASS" endtime="20170913 12:29:27.912" starttime="20170913 12:29:22.907"></status>
</kw>
<kw name="Click Button" library="Selenium2Library">
<doc>Clicks a button identified by `locator`.</doc>
<arguments>
<arg>xpath=//*[@id="login_form"]/div[2]/div/div/input</arg>
</arguments>
<msg timestamp="20170913 12:29:27.912" level="INFO">Clicking button 'xpath=//*[@id="login_form"]/div[2]/div/div/input'.</msg>
<status status="PASS" endtime="20170913 12:29:28.152" starttime="20170913 12:29:27.912"></status>
</kw>
<kw name="Sleep" library="BuiltIn">
<doc>Pauses the test executed for the given time.</doc>
<arguments>
<arg>5s</arg>
</arguments>
<msg timestamp="20170913 12:29:33.161" level="INFO">Slept 5 seconds</msg>
<status status="PASS" endtime="20170913 12:29:33.161" starttime="20170913 12:29:28.155"></status>
</kw>
<kw name="Input Text" library="Selenium2Library">
<doc>Types the given `text` into text field identified by `locator`.</doc>
<arguments>
<arg>identifier=password</arg>
<arg>${PW}</arg>
</arguments>
<msg timestamp="20170913 12:29:33.161" level="INFO">Typing text 'context@2017' into text field 'identifier=password'</msg>
<status status="PASS" endtime="20170913 12:29:33.336" starttime="20170913 12:29:33.161"></status>
</kw>
<kw name="Sleep" library="BuiltIn">
<doc>Pauses the test executed for the given time.</doc>
<arguments>
<arg>5s</arg>
</arguments>
<msg timestamp="20170913 12:29:38.379" level="INFO">Slept 5 seconds</msg>
<status status="PASS" endtime="20170913 12:29:38.379" starttime="20170913 12:29:33.337"></status>
</kw>
<kw name="Click Button" library="Selenium2Library">
<doc>Clicks a button identified by `locator`.</doc>
<arguments>
<arg>Login</arg>
</arguments>
<msg timestamp="20170913 12:29:38.379" level="INFO">Clicking button 'Login'.</msg>
<status status="PASS" endtime="20170913 12:29:38.542" starttime="20170913 12:29:38.379"></status>
</kw>
<kw name="Sleep" library="BuiltIn">
<doc>Pauses the test executed for the given time.</doc>
<arguments>
<arg>5s</arg>
</arguments>
<msg timestamp="20170913 12:29:43.552" level="INFO">Slept 5 seconds</msg>
<status status="PASS" endtime="20170913 12:29:43.552" starttime="20170913 12:29:38.543"></status>
</kw>
<doc>This is the valid test for LogIn and LogOff with both correct user anad password</doc>
<status status="PASS" endtime="20170913 12:29:43.552" critical="yes" starttime="20170913 12:28:58.808"></status>
</test>
<test id="s1-t3" name="Create Module">
<kw name="Click Element" library="Selenium2Library">
<doc>Click element identified by `locator`.</doc>
<arguments>
<arg>xpath=//*[@id="enw_menu"]/li[4]/a</arg>
</arguments>
<msg timestamp="20170913 12:29:43.552" level="INFO">Clicking element 'xpath=//*[@id="enw_menu"]/li[4]/a'.</msg>
<status status="PASS" endtime="20170913 12:29:43.646" starttime="20170913 12:29:43.552"></status>
</kw>
<kw name="Sleep" library="BuiltIn">
<doc>Pauses the test executed for the given time.</doc>
<arguments>
<arg>5s</arg>
</arguments>
<msg timestamp="20170913 12:29:48.658" level="INFO">Slept 5 seconds</msg>
<status status="PASS" endtime="20170913 12:29:48.658" starttime="20170913 12:29:43.646"></status>
</kw>
<kw name="Click Element" library="Selenium2Library">
<doc>Click element identified by `locator`.</doc>
<arguments>
<arg>xpath=//*[@id="enw_menu"]/li[4]/ul/li[1]/a</arg>
</arguments>
<msg timestamp="20170913 12:29:48.658" level="INFO">Clicking element 'xpath=//*[@id="enw_menu"]/li[4]/ul/li[1]/a'.</msg>
<status status="PASS" endtime="20170913 12:29:50.276" starttime="20170913 12:29:48.658"></status>
</kw>
<kw name="Sleep" library="BuiltIn">
<doc>Pauses the test executed for the given time.</doc>
<arguments>
<arg>5s</arg>
</arguments>
<msg timestamp="20170913 12:29:55.281" level="INFO">Slept 5 seconds</msg>
<status status="PASS" endtime="20170913 12:29:55.281" starttime="20170913 12:29:50.277"></status>
</kw>
<kw name="Click Element" library="Selenium2Library">
<doc>Click element identified by `locator`.</doc>
<arguments>
<arg>xpath=//*[@id="new-module-btn"]</arg>
</arguments>
<msg timestamp="20170913 12:29:55.281" level="INFO">Clicking element 'xpath=//*[@id="new-module-btn"]'.</msg>
<status status="PASS" endtime="20170913 12:29:56.133" starttime="20170913 12:29:55.281"></status>
</kw>
<kw name="Sleep" library="BuiltIn">
<doc>Pauses the test executed for the given time.</doc>
<arguments>
<arg>5s</arg>
</arguments>
<msg timestamp="20170913 12:30:01.148" level="INFO">Slept 5 seconds</msg>
<status status="PASS" endtime="20170913 12:30:01.148" starttime="20170913 12:29:56.134"></status>
</kw>
<kw name="Input Text" library="Selenium2Library">
<doc>Types the given `text` into text field identified by `locator`.</doc>
<arguments>
<arg>identifier=module_name</arg>
<arg>${MODULE1}</arg>
</arguments>
<msg timestamp="20170913 12:30:01.148" level="INFO">Typing text 'TestingModule1' into text field 'identifier=module_name'</msg>
<status status="PASS" endtime="20170913 12:30:01.587" starttime="20170913 12:30:01.148"></status>
</kw>
<kw name="Sleep" library="BuiltIn">
<doc>Pauses the test executed for the given time.</doc>
<arguments>
<arg>5s</arg>
</arguments>
<msg timestamp="20170913 12:30:06.594" level="INFO">Slept 5 seconds</msg>
<status status="PASS" endtime="20170913 12:30:06.594" starttime="20170913 12:30:01.588"></status>
</kw>
<kw name="Click Element" library="Selenium2Library">
<doc>Click element identified by `locator`.</doc>
<arguments>
<arg>xpath=//*[@id="folder_id"]</arg>
</arguments>
<msg timestamp="20170913 12:30:06.594" level="INFO">Clicking element 'xpath=//*[@id="folder_id"]'.</msg>
<status status="PASS" endtime="20170913 12:30:06.787" starttime="20170913 12:30:06.594"></status>
</kw>
<kw name="Sleep" library="BuiltIn">
<doc>Pauses the test executed for the given time.</doc>
<arguments>
<arg>5s</arg>
</arguments>
<msg timestamp="20170913 12:30:11.793" level="INFO">Slept 5 seconds</msg>
<status status="PASS" endtime="20170913 12:30:11.793" starttime="20170913 12:30:06.791"></status>
</kw>
<kw name="Click Element" library="Selenium2Library">
<doc>Click element identified by `locator`.</doc>
<arguments>
<arg>xpath=.//*[@id='folder_id']/option[11]</arg>
</arguments>
<msg timestamp="20170913 12:30:11.793" level="INFO">Clicking element 'xpath=.//*[@id='folder_id']/option[11]'.</msg>
<status status="PASS" endtime="20170913 12:30:11.919" starttime="20170913 12:30:11.793"></status>
</kw>
<kw name="Sleep" library="BuiltIn">
<doc>Pauses the test executed for the given time.</doc>
<arguments>
<arg>5s</arg>
</arguments>
<msg timestamp="20170913 12:30:16.933" level="INFO">Slept 5 seconds</msg>
<status status="PASS" endtime="20170913 12:30:16.933" starttime="20170913 12:30:11.919"></status>
</kw>
<kw name="Input Text" library="Selenium2Library">
<doc>Types the given `text` into text field identified by `locator`.</doc>
<arguments>
<arg>identifier=description</arg>
<arg>${DESCRIPTION1}</arg>
</arguments>
<msg timestamp="20170913 12:30:16.933" level="INFO">Typing text 'Module 1 for Automated Testing' into text field 'identifier=description'</msg>
<status status="PASS" endtime="20170913 12:30:17.572" starttime="20170913 12:30:16.933"></status>
</kw>
<kw name="Sleep" library="BuiltIn">
<doc>Pauses the test executed for the given time.</doc>
<arguments>
<arg>5s</arg>
</arguments>
<msg timestamp="20170913 12:30:22.578" level="INFO">Slept 5 seconds</msg>
<status status="PASS" endtime="20170913 12:30:22.578" starttime="20170913 12:30:17.573"></status>
</kw>
<kw name="Click Element" library="Selenium2Library">
<doc>Click element identified by `locator`.</doc>
<arguments>
<arg>xpath=.//*[@id='code']</arg>
</arguments>
<msg timestamp="20170913 12:30:22.578" level="INFO">Clicking element 'xpath=.//*[@id='code']'.</msg>
<status status="PASS" endtime="20170913 12:30:22.820" starttime="20170913 12:30:22.578"></status>
</kw>
<kw name="Sleep" library="BuiltIn">
<doc>Pauses the test executed for the given time.</doc>
<arguments>
<arg>5s</arg>
</arguments>
<msg timestamp="20170913 12:30:27.825" level="INFO">Slept 5 seconds</msg>
<status status="PASS" endtime="20170913 12:30:27.825" starttime="20170913 12:30:22.821"></status>
</kw>
<kw name="Get File" library="OperatingSystem">
<doc>Returns the contents of a specified file.</doc>
<arguments>
<arg>resources\\01.txt</arg>
</arguments>
<assign>
<var>${read_FILE}</var>
</assign>
<msg timestamp="20170913 12:30:27.825" html="yes" level="INFO">Getting file '&lt;a href="file://C:\development\robot-scripts\urp\resources\01.txt"&gt;C:\development\robot-scripts\urp\resources\01.txt&lt;/a&gt;'.</msg>
<msg timestamp="20170913 12:30:27.825" level="INFO">${read_FILE} = -- create first table used for SO and SO QC
--DROP FUNCTION IF EXISTS pg_temp.so_extraction_standard (varchar, varchar);
CREATE OR REPLACE FUNCTION pg_temp.so_extraction_standard (intel_schema varchar...</msg>
<status status="PASS" endtime="20170913 12:30:27.825" starttime="20170913 12:30:27.825"></status>
</kw>
<kw name="Sleep" library="BuiltIn">
<doc>Pauses the test executed for the given time.</doc>
<arguments>
<arg>5s</arg>
</arguments>
<msg timestamp="20170913 12:30:32.827" level="INFO">Slept 5 seconds</msg>
<status status="PASS" endtime="20170913 12:30:32.827" starttime="20170913 12:30:27.825"></status>
</kw>
<kw name="Input Text" library="Selenium2Library">
<doc>Types the given `text` into text field identified by `locator`.</doc>
<arguments>
<arg>xpath=.//*[@id='code']</arg>
<arg>${read_FILE}</arg>
</arguments>
<msg timestamp="20170913 12:30:32.827" level="INFO">Typing text '-- create first table used for SO and SO QC
--DROP FUNCTION IF EXISTS pg_temp.so_extraction_standard (varchar, varchar);
CREATE OR REPLACE FUNCTION pg_temp.so_extraction_standard (intel_schema varchar, bplist varchar) returns character varying as
$BODY$ 

DECLARE
return_query varchar;
startdate varchar;
enddate varchar;

BEGIN
-- get dates from report_dates table
EXECUTE 'SELECT start_date FROM ' || intel_schema || '.report_dates limit 1;'
    INTO startdate;
EXECUTE 'SELECT end_date FROM ' || intel_schema || '.report_dates limit 1;'
    INTO enddate;

    return_query  = '
    
        -- sales out extraction and filtering from PEx
        drop table if exists ' || intel_schema || '.so_step1_standard;
        CREATE TABLE ' || intel_schema || '.so_step1_standard as
        SELECT
            year,
            month,
            country_id,
            country_name,
            country_standard as intel_country_code,
            intel_cpu_name,
            intel_form_factor AS form_factor,
            vendor_standard as oem,
            processor_model,
            company_name,
            oem_model_number,
            intel_form_factor,
            intel_form_factor AS customer_form_factor,
            operating_system_intel,
            intel_screen_size,
            --tio,
            CASE WHEN product_category_standard IN (''Desktop'', ''Notebook'') THEN NULL
                WHEN tio = ''Yes'' THEN ''2in1''
                WHEN form_factor = ''All-in-One Desktop'' THEN ''AIO''
                ELSE ''None'' END AS tio,
            touchscreen,
            NULL::NUMERIC(12,2) AS spp,
            intel_week,
            mcp_flag,
            business_id,
            --------- For other reports
            source_part_no,
            ean_rf,
            --------- For separating into companies
            datasource_id,
            bpl_company,            
            --------- Aggregations
            SUM(day_units) AS total_quantity
        
        FROM ' || intel_schema ||'.pex_distributed_units
        WHERE TRUE
        AND datasource_id IN (' || bplist || ')
        AND day_date &amp;gt;= ''' || startdate || ''' --- ********** FILTER/VARIABLE
        AND day_date &amp;lt;= ''' || enddate || ''' --- ********** FILTER/VARIABLE
        AND day_date &amp;gt;= COALESCE(bpl_valid_from::DATE, ''1999-01-01''::DATE) --- ********** FILTER/VARIABLE
        AND day_date &amp;lt;= COALESCE(bpl_valid_to::DATE, NOW()::DATE) --- ********** FILTER/VARIABLE
        AND live
        AND processor_vendor = ''Intel'' -- processor_vendor: Intel Products
        GROUP BY 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
        HAVING SUM(units) != 0
        ;
        ';

        EXECUTE return_query;
        
        EXECUTE 'UPDATE ' || intel_schema || '.so_step1_standard SET mcp_flag = NULL WHERE mcp_flag ilike ''no'';';
    -- Create table with the list of companies in the SO table for splitting the data  --- This and the splitting is a remnant from the old Intel reports that required to the csv's to be outputted with a special header and format
RETURN return_query;
END;
$BODY$ 
LANGUAGE plpgsql;

select pg_temp.so_extraction_standard('${schema_intel}', '${bps}');' into text field 'xpath=.//*[@id='code']'</msg>
<status status="PASS" endtime="20170913 12:31:08.243" starttime="20170913 12:30:32.827"></status>
</kw>
<kw name="Sleep" library="BuiltIn">
<doc>Pauses the test executed for the given time.</doc>
<arguments>
<arg>5s</arg>
</arguments>
<msg timestamp="20170913 12:31:13.256" level="INFO">Slept 5 seconds</msg>
<status status="PASS" endtime="20170913 12:31:13.256" starttime="20170913 12:31:08.244"></status>
</kw>
<kw name="Click Element" library="Selenium2Library">
<doc>Click element identified by `locator`.</doc>
<arguments>
<arg>xpath=//*[@id="save_module_details_btn"]</arg>
</arguments>
<msg timestamp="20170913 12:31:13.256" level="INFO">Clicking element 'xpath=//*[@id="save_module_details_btn"]'.</msg>
<status status="PASS" endtime="20170913 12:31:13.493" starttime="20170913 12:31:13.256"></status>
</kw>
<kw name="Sleep" library="BuiltIn">
<doc>Pauses the test executed for the given time.</doc>
<arguments>
<arg>5s</arg>
</arguments>
<msg timestamp="20170913 12:31:18.519" level="INFO">Slept 5 seconds</msg>
<status status="PASS" endtime="20170913 12:31:18.519" starttime="20170913 12:31:13.510"></status>
</kw>
<status status="PASS" endtime="20170913 12:31:18.519" critical="yes" starttime="20170913 12:29:43.552"></status>
</test>
<test id="s1-t4" name="LogOff">
<kw name="Click Button" library="Selenium2Library">
<doc>Clicks a button identified by `locator`.</doc>
<arguments>
<arg>xpath=//*[@id="logout_form"]/button</arg>
</arguments>
<msg timestamp="20170913 12:31:18.519" level="INFO">Clicking button 'xpath=//*[@id="logout_form"]/button'.</msg>
<kw name="Capture Page Screenshot" library="Selenium2Library">
<doc>Takes a screenshot of the current page and embeds it into the log.</doc>
<msg timestamp="20170913 12:31:19.057" html="yes" level="INFO">&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td colspan="3"&gt;&lt;a href="selenium-screenshot-1.png"&gt;&lt;img src="selenium-screenshot-1.png" width="800px"&gt;&lt;/a&gt;</msg>
<status status="PASS" endtime="20170913 12:31:19.057" starttime="20170913 12:31:18.707"></status>
</kw>
<msg timestamp="20170913 12:31:19.065" level="FAIL">ElementNotVisibleException: Message: element not visible
  (Session info: chrome=60.0.3112.113)
  (Driver info: chromedriver=2.32.498550 (9dec58e66c31bcc53a9ce3c7226f0c1c5810906a),platform=Windows NT 6.1.7601 SP1 x86_64)
</msg>
<status status="FAIL" endtime="20170913 12:31:19.065" starttime="20170913 12:31:18.519"></status>
</kw>
<status status="FAIL" endtime="20170913 12:31:19.067" critical="yes" starttime="20170913 12:31:18.519">ElementNotVisibleException: Message: element not visible
  (Session info: chrome=60.0.3112.113)
  (Driver info: chromedriver=2.32.498550 (9dec58e66c31bcc53a9ce3c7226f0c1c5810906a),platform=Windows NT 6.1.7601 SP1 x86_64)
</status>
</test>
<doc>This is some basic info about the whole suite</doc>
<status status="FAIL" endtime="20170913 12:31:19.099" starttime="20170913 12:28:58.387"></status>
</suite>
<statistics>
<total>
<stat fail="1" pass="3">Critical Tests</stat>
<stat fail="1" pass="3">All Tests</stat>
</total>
<tag>
<stat fail="0" pass="1">SQL from File</stat>
</tag>
<suite>
<stat fail="1" id="s1" name="Module1 create" pass="3">Module1 create</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
